# TDD @Gilded Rose

## 开发环境

- JDK1.8+

## 业务需求

"镶金玫瑰"！这是一家魔兽世界里的小商店。出售的商品也都是高质量的。但不妙的是，随着商品逐渐接近保质期，它们的质量也不断下滑。我们用一个 IT 系统来更新库存信息。

首先，简单介绍一下我们的系统：

- 所有商品都有一个`SellIn`值，这是商品距离过期的天数，最好在这么多天之内卖掉
- 所有商品都有一个`Quality`值，代表商品的价值
- 商品的`SellIn`值和`Quality`值，它们每天会发生变化，但是会有特例

商品的价格规则说明如下：

- 商品的价值永远不会小于 0，也永远不会超过 50
- 一旦过了保质期，`Quality`就以双倍的速度下滑
- 陈年干酪（`Aged Brie`）是一种特殊的商品，放得越久，价值反而越高
- 萨弗拉斯（`Sulfuras`）是一种传奇商品，没有保质期的概念，价值也不会下滑
- 后台门票（`Backstage pass`）和陈年干酪（`Aged Brie`）有相似之处： - 越接近演出日，商品的价值反而上升 - 在演出前 10 天，价值每天上升 2 点 - 演出前 5 天，价值每天上升 3 点 - 一旦过了演出日，价值就马上变成 0

## 测试方案

常规商品

GIVEN 普通商品距离过期的天数为 10，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为 9，价值为 19

GIVEN 普通商品距离过期的天数为 2，价值为 0
WHEN 经过一天
THEN 商品距离过期的天数为 1，价值为 0

GIVEN 普通商品距离过期的天数为 3，价值为 6
WHEN 经过一天
THEN 商品距离过期的天数为 2，价值为 5

GIVEN 普通商品距离过期的天数为 3，价值为 51
WHEN 经过一天
THEN 商品距离过期的天数为 2，价值为 50

GIVEN 普通商品距离过期的天数为 0，价值为 6
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 4

GIVEN 普通商品距离过期的天数为-1，价值为 6
WHEN 经过一天
THEN 商品距离过期的天数为-2，价值为 4

后台门票

GIVEN 后台门票距离过期的天数为 15，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为 14，价值为 21

GIVEN 后台门票距离过期的天数为 10，价值为 45
WHEN 经过一天
THEN 商品距离过期的天数为 9，价值为 47

GIVEN 后台门票距离过期的天数为 9，价值为 45
WHEN 经过一天
THEN 商品距离过期的天数为 8，价值为 47

GIVEN 后台门票距离过期的天数为 10，价值为 49
WHEN 经过一天
THEN 商品距离过期的天数为 9，价值为 50

GIVEN 后台门票距离过期的天数为 10，价值为 50
WHEN 经过一天
THEN 商品距离过期的天数为 9，价值为 50

GIVEN 后台门票距离过期的天数为 5，价值为 49
WHEN 经过一天
THEN 商品距离过期的天数为 4，价值为 50

GIVEN 后台门票距离过期的天数为 5，价值为 45
WHEN 经过一天
THEN 商品距离过期的天数为 4，价值为 48

GIVEN 后台门票距离过期的天数为 1，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为 0，价值为 23

GIVEN 后台门票距离过期的天数为 0，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 0

萨弗拉斯

GIVEN 萨弗拉斯距离过期的天数为 0，价值为 45
WHEN 经过一天
THEN 商品距离过期的天数为 0，价值为 45

GIVEN 萨弗拉斯距离过期的天数为-1，价值为 45
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 45

GIVEN 萨弗拉斯距离过期的天数为-1，价值为 50
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 50

GIVEN 萨弗拉斯距离过期的天数为-1，价值为 1
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 1

GIVEN 萨弗拉斯距离过期的天数为-2，价值为 1
WHEN 经过一天
THEN 商品距离过期的天数为-2，价值为 1

陈年干酪

GIVEN 陈年干酪距离过期的天数为 2，价值为 0
WHEN 经过一天
THEN 商品距离过期的天数为 1，价值为 1

GIVEN 陈年干酪距离过期的天数为 2，价值为 49
WHEN 经过一天
THEN 商品距离过期的天数为 1，价值为 50

GIVEN 陈年干酪距离过期的天数为 2，价值为 50
WHEN 经过一天
THEN 商品距离过期的天数为 1，价值为 50

GIVEN 陈年干酪距离过期的天数为 0，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为-1，价值为 22

GIVEN 陈年干酪距离过期的天数为-1，价值为 20
WHEN 经过一天
THEN 商品距离过期的天数为-2，价值为 22
